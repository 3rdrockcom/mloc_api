START TRANSACTION;

ALTER ALGORITHM=UNDEFINED SQL SECURITY DEFINER VIEW `view_customer_info`  AS  (select `a`.`cust_unique_id` AS `cust_unique_id`,`a`.`id` AS `customer_id`,`a`.`first_name` AS `first_name`,`a`.`middle_name` AS `middle_name`,`a`.`last_name` AS `last_name`,`a`.`suffix` AS `suffix`,`a`.`birth_date` AS `birth_date`,`a`.`address1` AS `address1`,`a`.`address2` AS `address2`,`c`.`country_id` AS `country_id`,`c`.`name` AS `country_desc`,`d`.`state_id` AS `state_id`,`d`.`state_code` AS `state_code`,`d`.`state` AS `state_desc`,`e`.`city_id` AS `city_id`,`e`.`city` AS `city_desc`,`a`.`zipcode` AS `zipcode`,`a`.`home_number` AS `home_number`,`a`.`mobile_number` AS `mobile_number`,`a`.`email` AS `email`,`b`.`company_name` AS `company_name`,`b`.`phone_number` AS `phone_number`,`b`.`net_pay_percheck` AS `net_pay_percheck`,`b`.`income_source` AS `income_source_id`,`h`.`mloc_access` AS `mloc_access`,`h`.`registration` AS `registration`,`h`.`term_and_condition` AS `term_and_condition`,`f`.`description` AS `income_source_desc`,`b`.`pay_frequency` AS `pay_frequency_id`,`g`.`description` AS `pay_frequency_desc`,`b`.`next_paydate` AS `next_paydate`,`b`.`following_paydate` AS `following_paydate`,`i`.`key` AS `key`,`j`.`credit_limit` AS `credit_limit`,`j`.`available_credit` AS `available_credit`,`j`.`is_suspended` AS `is_suspended`,`j`.`credit_line_id` AS `credit_line_id`,`j`.`approved_by` AS `credit_approved_by`,`k`.`total_principal_amount` AS `loan_total_principal_amount`,`k`.`total_fee_amount` AS `loan_total_fee_amount`,`k`.`total_amount` AS `loan_total_amount`,`a`.`program_customer_id` AS `program_customer_id`,`a`.`program_customer_mobile` AS `program_customer_mobile` from ((((((((((`tblCustomerBasicInfo` `a` left join `tblCustomerOtherInfo` `b` on((`b`.`fk_customer_id` = `a`.`id`))) left join `tblCountry` `c` on((`c`.`country_id` = `a`.`country`))) left join `tblState` `d` on((`d`.`state_id` = `a`.`state`))) left join `tblCity` `e` on((`e`.`city_id` = `a`.`city`))) left join `tblIncomeSource` `f` on((`f`.`id` = `b`.`income_source`))) left join `tblPayFrequency` `g` on((`g`.`id` = `b`.`pay_frequency`))) left join `tblCustomerAgreement` `h` on((`h`.`fk_customer_id` = `a`.`id`))) left join `tblApiKey` `i` on((`i`.`fk_customer_id` = `a`.`id`))) left join `tblCustomerCreditLine` `j` on((`j`.`fk_customer_id` = `a`.`id`))) left join `tblCustomerLoanTotal` `k` on((`k`.`fk_customer_id` = `a`.`id`)))) ;

ALTER TABLE `tblCustomerBasicInfo` DROP `CLABE`;

COMMIT;